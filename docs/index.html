<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>NSJS Namespacing and Module Loading Library</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <style>body {
    margin: 0;
    padding: 0;
    font: 14px/1.5 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    color: #252519;
}
a {
    color: #252519;
}
a:hover {
    text-decoration: underline;
    color: #19469D;
}
p {
    margin: 12px 0;
}
h1, h2, h3 {
    margin: 0;
    padding: 0;
}
ul {
    padding-left: 20px;
}
img {
    border: 0;
}
table#source {
    width: 100%;
    border-collapse: collapse;
}
table#source td:first-child {
    padding: 30px;
    vertical-align: top;
}
table#source td:first-child,
table#source td:first-child pre {
    width: 450px;
}
table#source td:last-child {
    padding: 30px;
    border-left: 1px solid #E5E5EE;
    background: #F5F5FF;
}
table#source tr {
    border-bottom: 1px solid #E5E5EE;
}
table#source tr.filename {
    padding-top: 40px;
    border-top: 1px solid #E5E5EE;
}
table#source tr.filename td:first-child {
    cursor: pointer;
    text-transform: capitalize;
}
table#source tr.filename td:last-child {
    font-size: 12px;
}
table#source tr.filename h2 {
    margin: 0;
    padding: 0;
    text-decoration: underline;
}
table#source tr.code h1,
table#source tr.code h2,
table#source tr.code h3 {
    margin-top: 30px;
    font-family: "Lucida Grande", "Helvetica Nueue", Arial, sans-serif;
    font-size: 18px;
}
table#source tr.code h2 {
    font-size: 16px;
}
table#source tr.code h3 {
    font-size: 14px;
}
table#source tr.code ul {
    margin: 15px 0 15px 35px;
    padding: 0;
}
table#source tr.code ul li {
    margin: 0;
    padding: 1px 0;
}
table#source tr.code ul li p {
    margin: 0;
    padding: 0;
}
table#source tr.code td:first-child pre {
    padding: 20px;
}
#ribbon {
    position: fixed;
    top: 0;
    right: 0;
}
code .string { color: #219161; }
code .regexp { color: #219161; }
code .keyword { color: #954121; }
code .number { color: #19469D; }
code .comment { color: #bbb; }
code .this { color: #19469D; }
pre.shell code .prompt-user { color: #219121; }
pre.shell code .prompt-root { color: #912121; }

</style>
        <script>
            $(function(){
                if ($('tr.filename').length) {
                    $('tr.code').hide();
                    $('tr.filename').toggle(function(){
                        $(this).nextUntil('.filename').fadeIn();
                    }, function(){
                        $(this).nextUntil('.filename').fadeOut();
                    });
                }
            });
        </script>
    </head>
    <body>
        <table id="source"><tbody>
            <tr>
                <td><h1>NSJS Namespacing and Module Loading Library</h1>

                </td>
                <td>

                </td>
            </tr>
            <tr class="filename">
                <td>
<h2 id="nsjs">nsjs</h2>
                </td>
                <td>
src/nsjs.js
                </td>
            </tr>
            <tr class="code">
                <td>
<p>nsjs namespacing library for JavaScriptThe objective of this library is to create a standard and reusable way to ensure namespace architecture
 </p>
                </td>
                <td>
<pre><code>(<span class="keyword">function</span>(<span class="variable">exports</span>){</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p> - <strong>constructor</strong>: <em>Namespace</em>
## </p>

<ul><li><p><strong>param</strong>: <em>String</em>  name - <strong>param</strong>
{Namespace} parent</p></li></ul>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="class">Namespace</span>(<span class="variable">name</span>, <span class="variable">parent</span>){
	<span class="keyword">if</span>(!<span class="regexp">/^[a-z0-9_.]+/</span>.<span class="variable">test</span>(<span class="variable">name</span>)){
		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'Invalid name provided.'</span> + <span class="variable">name</span>);
	}
	<span class="this">this</span>.<span class="variable">__name</span> = <span class="variable">name</span>;
	<span class="this">this</span>.<span class="variable">__parent</span> = <span class="variable">parent</span> || <span class="variable">exports</span>;
	<span class="this">this</span>.<span class="variable">__type</span> = <span class="string">'Namespace'</span>;
	<span class="keyword">return</span> <span class="this">this</span>;
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p> - <strong>constructor</strong>: <em>Module</em>
## </p>

<ul><li><p><strong>param</strong>: <em>String</em>  name - <strong>param</strong>
{Namespace} parent - <strong>param</strong>
{String} type - <strong>param</strong>
{Any} module - <strong>returns</strong>
{Module} this</p></li></ul>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="class">Module</span>(<span class="variable">name</span>, <span class="variable">parent</span>, <span class="variable">type</span>, <span class="variable">module</span>){
	<span class="keyword">if</span>(!<span class="regexp">/^[A-Za-z0-9_.]+/</span>.<span class="variable">test</span>(<span class="variable">name</span>)){
		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'Invalid name provided.'</span> + <span class="variable">name</span>);
	}
	<span class="this">this</span>.<span class="variable">__name</span> = <span class="variable">name</span>;
	<span class="this">this</span>.<span class="variable">__type</span> = <span class="variable">type</span>;
	<span class="this">this</span>.<span class="variable">__parent</span> = <span class="variable">parent</span> || <span class="variable">exports</span>;
	<span class="this">this</span>.<span class="variable">ns</span> = <span class="variable">ns</span>;
	<span class="this">this</span>.<span class="variable">load</span> = <span class="variable">load</span>;
	<span class="this">this</span>.<span class="variable">lock</span> = <span class="variable">lock</span>;
	<span class="keyword">return</span> <span class="this">this</span>;
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p> - <strong>function</strong>: <em>ns</em>
 - <strong>param</strong>: <em>name</em>
 {String}
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">ns</span>(<span class="variable">name</span>){
	<span class="keyword">var</span> <span class="variable">space</span>,
		<span class="variable">_super</span> = <span class="this">this</span>,
		<span class="variable">i</span> = <span class="number integer">0</span>,
		<span class="variable">errors</span> = [];
	<span class="variable">name</span> = (<span class="variable">name</span>.<span class="variable">indexOf</span>(<span class="string">'.'</span>) &gt; -<span class="number integer">1</span>)?<span class="variable">name</span>.<span class="variable">split</span>(<span class="string">'.'</span>):[<span class="variable">name</span>];
	<span class="keyword">for</span>(;<span class="variable">space</span> = <span class="variable">name</span>[<span class="variable">i</span>++];){
		<span class="keyword">if</span>(<span class="variable">_super</span>[<span class="variable">space</span>] !== <span class="variable">undefined</span>){
			<span class="keyword">var</span> <span class="variable">err</span> = <span class="keyword">new</span> <span class="class">Error</span>(<span class="variable">space</span> + <span class="string">' namespace already defined.'</span>);
			<span class="variable">errors</span>.<span class="variable">push</span>(<span class="variable">err</span>);
			<span class="variable">_super</span> = <span class="variable">_super</span>[<span class="variable">space</span>];
			<span class="keyword">continue</span>;
		}
		<span class="variable">_super</span>[<span class="variable">space</span>] = <span class="keyword">new</span> <span class="class">Namespace</span>(<span class="variable">space</span>, <span class="variable">_super</span>);
		<span class="variable">_super</span> = <span class="variable">_super</span>[<span class="variable">space</span>];
	}
	<span class="keyword">if</span>(<span class="variable">errors</span>.<span class="variable">length</span> &gt; <span class="number integer">0</span>){
		<span class="keyword">throw</span> <span class="variable">errors</span>;
	}
	<span class="keyword">return</span> <span class="variable">_super</span>;
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p> - <strong>function</strong>: <em>load</em>
when loading a function as a module the context of this will be the parent object, even if that is a function.watch out for chaining this as the context will become lost if you call this inside the parent function (this);example:		ns('test');		test.load('fn', function(x){return x;}) - <strong>param</strong>: <em>name</em>
 {String} - <strong>param</strong>: <em>module</em>
 - <strong>param</strong>: <em>last</em>
 {Boolean}
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">load</span>(<span class="variable">name</span>, <span class="variable">module</span>, <span class="variable">immutable</span>){
	<span class="keyword">var</span> <span class="variable">type</span> = <span class="variable">detectType</span>(<span class="variable">module</span>),
		<span class="variable">get</span>,
		<span class="variable">set</span>,
		<span class="variable">context</span>;
	<span class="keyword">if</span>(<span class="this">this</span>[<span class="variable">name</span>] !== <span class="variable">undefined</span>){
		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'Module already defined.'</span>);
	}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function  defaultset - <strong>class</strong>: <em>load</em>
 - <strong>param</strong>: <em>value</em></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">defaultset</span>(<span class="variable">value</span>){
	<span class="variable">module</span> = <span class="variable">value</span>;
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function defaultget - <strong>class</strong>: <em>load</em>
 - <strong>returns</strong></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">defaultget</span>(){
	<span class="keyword">var</span> <span class="variable">slice</span> = <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">slice</span>,
		<span class="variable">res</span>;
	<span class="keyword">if</span>(!<span class="variable">immutable</span>){
		<span class="keyword">if</span>(<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">1</span>){
			<span class="variable">set</span>(<span class="variable">arguments</span>[<span class="number integer">0</span>]);
		}			
	}
	<span class="variable">res</span> = (<span class="keyword">typeof</span> <span class="variable">module</span> === <span class="string">'object'</span>)?
			(<span class="variable">module</span> <span class="variable">instanceof</span> <span class="class">Array</span>)?
					<span class="variable">slice</span>.<span class="variable">call</span>(<span class="variable">module</span>, <span class="number integer">0</span>): <span class="comment">// copy the array</span>
						<span class="class">Object</span>.<span class="variable">clone</span>(<span class="variable">module</span>): <span class="comment">// copy the object</span>
							<span class="variable">module</span>; <span class="comment">// return the primitive</span>
	<span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="variable">get</span> === <span class="string">'function'</span>){
		<span class="keyword">return</span> <span class="variable">get</span>(<span class="variable">res</span>);
	}
	<span class="keyword">return</span> <span class="variable">res</span>;
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function changeSetter - <strong>class</strong>: <em>load</em>
## </p>

<ul><li><p><strong>param</strong>: <em>Function</em>  fn</p></li></ul>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">changeSetter</span>(<span class="variable">fn</span>){
	<span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="variable">fn</span> === <span class="string">'function'</span>){
		<span class="variable">set</span> = <span class="keyword">function</span>(<span class="variable">value</span>){
			<span class="keyword">var</span> <span class="variable">res</span> = <span class="variable">fn</span>(<span class="variable">value</span>);
			<span class="variable">defaultset</span>(<span class="variable">res</span>);
		};
	}
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function changeGetter - <strong>class</strong>: <em>load</em>
## </p>

<ul><li><p><strong>param</strong>: <em>Function</em>  fn</p></li></ul>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">changeGetter</span>(<span class="variable">fn</span>){
	<span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="variable">fn</span> === <span class="string">'function'</span>){
		<span class="variable">get</span> = <span class="variable">fn</span>;
	}
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>finish the load declaration
 </p>
                </td>
                <td>
<pre><code><span class="variable">set</span> = <span class="variable">defaultset</span>;
	<span class="variable">defaultget</span>.<span class="variable">changeGetter</span> = <span class="variable">changeGetter</span>;
	<span class="variable">defaultget</span>.<span class="variable">changeSetter</span> = <span class="variable">changeSetter</span>;

	<span class="keyword">if</span>(<span class="variable">type</span> === <span class="string">'Property'</span>){
		<span class="class">Module</span>.<span class="variable">prototype</span> = <span class="class">Object</span>.<span class="variable">create</span>(<span class="variable">defaultget</span>);
		<span class="this">this</span>[<span class="variable">name</span>] = <span class="class">Module</span>.<span class="variable">call</span>(<span class="variable">defaultget</span>, <span class="variable">name</span>, <span class="this">this</span>, <span class="variable">type</span>, <span class="variable">defaultget</span>);
	}<span class="keyword">else</span>{
		<span class="class">Module</span>.<span class="variable">prototype</span> = <span class="class">Object</span>.<span class="variable">create</span>(<span class="variable">module</span>);
		<span class="this">this</span>[<span class="variable">name</span>] = (<span class="keyword">typeof</span> <span class="variable">module</span> !== <span class="string">'function'</span>)?<span class="keyword">new</span> <span class="class">Module</span>(<span class="variable">name</span>, <span class="this">this</span>, <span class="variable">type</span>, <span class="variable">module</span>):<span class="class">Module</span>.<span class="variable">call</span>(<span class="variable">module</span>, <span class="variable">name</span>, <span class="this">this</span>, <span class="variable">type</span>, <span class="variable">module</span>);
	}
	<span class="variable">context</span> = <span class="this">this</span>[<span class="variable">name</span>];
	<span class="keyword">return</span> <span class="this">this</span>[<span class="variable">name</span>];
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p> - <strong>function</strong>: <em>lock</em></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">lock</span>(){
	<span class="this">this</span>.<span class="variable">ns</span> = <span class="keyword">function</span>(){};
	<span class="this">this</span>.<span class="variable">load</span> = <span class="keyword">function</span>(){};
	<span class="this">this</span>.<span class="variable">lock</span> = <span class="keyword">function</span>(){};
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p> - <strong>function</strong>: <em>detectType</em>
 - <strong>param</strong>: <em>module</em>
 - <strong>returns</strong>: <em>type</em>
 {String}
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">detectType</span>(<span class="variable">module</span>){
	<span class="keyword">var</span> <span class="variable">type</span> = <span class="string">'Unknown'</span>;
	<span class="keyword">switch</span>(<span class="keyword">typeof</span> <span class="variable">module</span>){
	<span class="keyword">case</span> <span class="string">'string'</span>:
	<span class="keyword">case</span> <span class="string">'number'</span>:
	<span class="keyword">case</span> <span class="string">'boolean'</span>:
		<span class="variable">type</span> = <span class="string">'Property'</span>;
		<span class="keyword">break</span>;
	<span class="keyword">case</span> <span class="string">'object'</span>:
		<span class="keyword">if</span>(<span class="variable">module</span> <span class="variable">instanceof</span> <span class="class">Array</span>){
			<span class="variable">type</span> = <span class="string">'Collection'</span>;
			<span class="keyword">break</span>;
		}
		<span class="variable">type</span> = <span class="string">'Singleton'</span>;
		<span class="keyword">break</span>;
	<span class="keyword">case</span> <span class="string">'function'</span>:
		<span class="keyword">if</span>(<span class="variable">module</span>.<span class="variable">name</span> &amp;&amp; <span class="variable">module</span>.<span class="variable">name</span>[<span class="number integer">0</span>] === <span class="variable">module</span>.<span class="variable">name</span>[<span class="number integer">0</span>].<span class="variable">toUpperCase</span>()){
			<span class="variable">type</span> = <span class="string">'Constructor'</span>;
			<span class="keyword">break</span>;
		}
		<span class="variable">type</span> = <span class="string">'Method'</span>;
		<span class="keyword">break</span>;
	<span class="keyword">default</span>:
		<span class="keyword">break</span>;		
	}
	<span class="keyword">return</span> <span class="variable">type</span>;
}
<span class="class">Namespace</span>.<span class="variable">prototype</span> = {<span class="variable">ns</span> : <span class="variable">ns</span>, <span class="variable">load</span> : <span class="variable">load</span>, <span class="variable">lock</span> : <span class="variable">lock</span>};
<span class="class">Namespace</span>.<span class="variable">prototype</span>.<span class="variable">constructor</span> = <span class="class">Namespace</span>;</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function requirereturns a module by namespace. This should work in browser and node.
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">require</span>(<span class="variable">module</span>, <span class="variable">retain</span>){
	<span class="keyword">var</span> <span class="variable">path</span> = (<span class="variable">module</span>.<span class="variable">indexOf</span>(<span class="string">'.'</span>) &gt; -<span class="number integer">1</span>)?<span class="variable">module</span>.<span class="variable">split</span>(<span class="string">'.'</span>):[<span class="variable">module</span>],
		<span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">node</span>, <span class="variable">node_chain</span> = <span class="variable">exports</span>;
	<span class="keyword">for</span>(;<span class="variable">node</span> = <span class="variable">path</span>[<span class="variable">i</span>++];){
		<span class="keyword">if</span>(<span class="variable">i</span> === <span class="variable">path</span>.<span class="variable">length</span>){
			<span class="keyword">if</span>(<span class="variable">node_chain</span>[<span class="variable">node</span>].<span class="variable">__type</span> === <span class="string">'Method'</span> &amp;&amp; <span class="variable">retain</span>){
				<span class="keyword">return</span> <span class="variable">makeContextMethod</span>(<span class="variable">node_chain</span>[<span class="variable">node</span>], <span class="variable">node_chain</span>);
			}	
			<span class="keyword">return</span> <span class="variable">node_chain</span>[<span class="variable">node</span>];
		}
		<span class="variable">node_chain</span> = <span class="variable">node_chain</span>[<span class="variable">node</span>];
	}
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function makeContextMethod
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">makeContextMethod</span>(<span class="variable">method</span>, <span class="variable">context</span>){
	<span class="keyword">return</span> <span class="keyword">function</span>(){
		<span class="keyword">return</span> <span class="variable">method</span>.<span class="variable">apply</span>(<span class="variable">context</span>, <span class="variable">arguments</span>);
	};
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>global accessors
 </p>
                </td>
                <td>
<pre><code><span class="variable">exports</span>.<span class="class">Namespace</span> = <span class="class">Namespace</span>;
<span class="variable">exports</span>.<span class="class">Module</span> = <span class="class">Module</span>;
<span class="variable">exports</span>.<span class="variable">ns</span> = <span class="variable">ns</span>;
<span class="variable">exports</span>.<span class="variable">load</span> = <span class="variable">load</span>;
<span class="variable">exports</span>.<span class="variable">lock</span> = <span class="variable">lock</span>;
<span class="variable">exports</span>.<span class="variable">require</span> = <span class="variable">require</span>;
})((<span class="keyword">typeof</span> <span class="variable">exports</span> === <span class="string">'undefined'</span>)? <span class="this">this</span>:<span class="variable">exports</span>);</code></pre>
                </td>
            </tr>
            <tr class="filename">
                <td>
<h2 id="test">test</h2>
                </td>
                <td>
tests/test.js
                </td>
            </tr>
            <tr class="code">
                <td>
<p>nsjs tests - <strong>param</strong>: <em>exports</em></p>

<p> </p>
                </td>
                <td>
<pre><code>(<span class="keyword">function</span>(<span class="variable">exports</span>){
<span class="keyword">function</span> <span class="variable">repeat</span>(<span class="variable">c</span>, <span class="variable">n</span>){
	<span class="keyword">var</span> <span class="variable">res</span> = <span class="string">''</span>;
	<span class="keyword">while</span>(<span class="variable">n</span>--){
		<span class="variable">res</span> += <span class="variable">c</span>;
	}
	<span class="keyword">return</span> <span class="variable">res</span>;
}
<span class="keyword">var</span> <span class="variable">assert</span> = <span class="variable">require</span>(<span class="string">'assert'</span>),
	<span class="variable">tests</span> = [];</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function setup - <strong>param</strong>: <em>nsjs</em></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">setup</span>(<span class="variable">nsjs</span>){
	<span class="variable">nsjs</span>.<span class="variable">ns</span>(<span class="string">'namespace'</span>); <span class="comment">// namespace</span>
	<span class="variable">nsjs</span>.<span class="variable">ns</span>(<span class="string">'deep.namespace'</span>); <span class="comment">// deep namespace</span>
	<span class="variable">nsjs</span>.<span class="variable">load</span>(<span class="string">'singleton'</span>, {<span class="variable">a</span> : <span class="variable">true</span>}); <span class="comment">// singleton</span>
	<span class="variable">nsjs</span>.<span class="variable">load</span>(<span class="string">'method'</span>, <span class="keyword">function</span>(<span class="variable">x</span>){<span class="keyword">return</span> <span class="variable">x</span> * <span class="variable">x</span>;}); <span class="comment">// method</span>
	<span class="variable">nsjs</span>.<span class="variable">load</span>(<span class="string">'Constructor'</span>, <span class="keyword">function</span> <span class="class">Test</span>(){<span class="this">this</span>.<span class="variable">y</span> = <span class="variable">true</span>;}); <span class="comment">// constructor</span>
	<span class="variable">nsjs</span>.<span class="variable">load</span>(<span class="string">'number'</span>, <span class="number integer">1</span>); <span class="comment">// numeric property</span>
	<span class="variable">nsjs</span>.<span class="variable">load</span>(<span class="string">'string'</span>, <span class="string">'Hello World'</span>); <span class="comment">// string property</span>
	<span class="variable">nsjs</span>.<span class="variable">load</span>(<span class="string">'boolean'</span>, <span class="variable">true</span>); <span class="comment">// boolean property</span>
	<span class="variable">nsjs</span>.<span class="variable">ns</span>(<span class="string">'math'</span>); <span class="comment">// begin a math namespace for testing some ideas</span>
	<span class="variable">nsjs</span>.<span class="variable">math</span>.<span class="variable">load</span>(<span class="string">'add'</span>, <span class="keyword">function</span>(<span class="variable">x</span>, <span class="variable">y</span>){ <span class="keyword">return</span> <span class="variable">x</span> + <span class="variable">y</span>;});
	<span class="variable">nsjs</span>.<span class="variable">math</span>.<span class="variable">load</span>(<span class="string">'mul'</span>, <span class="keyword">function</span>(<span class="variable">x</span>, <span class="variable">y</span>){ <span class="keyword">var</span> <span class="variable">prod</span> = <span class="number integer">0</span>; <span class="keyword">while</span>(<span class="variable">y</span>--){<span class="variable">prod</span> = <span class="this">this</span>.<span class="variable">add</span>(<span class="variable">prod</span>, <span class="variable">x</span>);} <span class="keyword">return</span> <span class="variable">prod</span>;});
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function runTests - <strong>param</strong>: <em>context</em></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">runTests</span>(<span class="variable">context</span>){
	<span class="variable">setup</span>(<span class="variable">context</span>);
	<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>,
		<span class="variable">test</span>;
	<span class="keyword">for</span>(; <span class="variable">test</span> = <span class="variable">tests</span>[<span class="variable">i</span>++];){
		<span class="keyword">try</span>{
			<span class="variable">test</span>.<span class="variable">fn</span>(<span class="variable">context</span>);
			<span class="variable">console</span>.<span class="variable">log</span>(<span class="variable">test</span>.<span class="variable">name</span> + <span class="variable">repeat</span>(<span class="string">' '</span>, (<span class="number integer">50</span> - <span class="variable">test</span>.<span class="variable">name</span>.<span class="variable">length</span>)) + <span class="string">': Passed'</span>);
		}<span class="keyword">catch</span>(<span class="variable">e</span>){
			<span class="keyword">var</span> <span class="variable">j</span> = <span class="number integer">0</span>,
				<span class="variable">err</span>;
			<span class="keyword">if</span>(<span class="variable">e</span> <span class="variable">instanceof</span> <span class="class">Array</span>){
				<span class="keyword">for</span>(;<span class="variable">err</span> = <span class="variable">e</span>[<span class="variable">j</span>++];){
					<span class="variable">console</span>.<span class="variable">error</span>(<span class="variable">test</span>.<span class="variable">name</span> + <span class="variable">repeat</span>(<span class="string">' '</span>, (<span class="number integer">50</span> - <span class="variable">test</span>.<span class="variable">name</span>.<span class="variable">length</span>)) + <span class="string">': Error :: '</span> + <span class="variable">err</span>.<span class="variable">name</span> + <span class="string">' '</span> + <span class="variable">err</span>.<span class="variable">message</span>);
				}
				<span class="keyword">continue</span>;
			}
			<span class="keyword">if</span>(<span class="variable">e</span>.<span class="variable">name</span> === <span class="string">'AssertionError'</span>){
				<span class="variable">console</span>.<span class="variable">error</span>(<span class="variable">test</span>.<span class="variable">name</span> + <span class="variable">repeat</span>(<span class="string">' '</span>, (<span class="number integer">50</span> - <span class="variable">test</span>.<span class="variable">name</span>.<span class="variable">length</span>)) + <span class="string">': Failed :: '</span> + <span class="variable">e</span>.<span class="variable">name</span> + <span class="string">' '</span> + <span class="variable">e</span>.<span class="variable">message</span>);
				<span class="keyword">continue</span>;
			}
			<span class="variable">console</span>.<span class="variable">error</span>(<span class="variable">test</span>.<span class="variable">name</span> + <span class="variable">repeat</span>(<span class="string">' '</span>, (<span class="number integer">50</span> - <span class="variable">test</span>.<span class="variable">name</span>.<span class="variable">length</span>)) +  <span class="string">': Error :: '</span> + <span class="variable">e</span>.<span class="variable">name</span> + <span class="string">' '</span> + <span class="variable">e</span>.<span class="variable">message</span>);
		}
	}
	<span class="variable">tearDown</span>(<span class="variable">context</span>);
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function addTest - <strong>param</strong>: <em>fn</em></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">addTest</span>(<span class="variable">fn</span>){
	<span class="variable">tests</span>.<span class="variable">push</span>({<span class="variable">name</span> : <span class="variable">fn</span>.<span class="variable">name</span>, <span class="variable">fn</span>: <span class="variable">fn</span>});
}</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testNamespaceCreate - <strong>param</strong>: <em>ns</em></p>

<p> </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testNamespaceCreate</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'namespace'</span>), <span class="string">'The test namespace was not created!'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">namespace</span> <span class="variable">instanceof</span> <span class="variable">ns</span>.<span class="class">Namespace</span>, <span class="variable">t</span>  <span class="variable">of</span> <span class="variable">the</span> <span class="variable">appropriate</span> <span class="variable">type</span>!');
}
<span class="variable">addTest</span>(<span class="variable">testNamespaceCreate</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testNamespaceDuplicationError
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testNamespaceDuplicationError</span>(<span class="variable">ns</span>){
	<span class="keyword">try</span>{
		<span class="variable">ns</span>.<span class="variable">ns</span>(<span class="string">'namespace'</span>);
	}<span class="keyword">catch</span>(<span class="variable">e</span>){
		<span class="keyword">if</span>(<span class="variable">e</span> <span class="variable">instanceof</span> <span class="class">Array</span>){
			<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>,
				<span class="variable">err</span>,
				<span class="variable">fn</span> = <span class="keyword">function</span>(<span class="variable">err_i</span>){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="keyword">throw</span> <span class="variable">err_i</span>;};};
			<span class="keyword">for</span>(;<span class="variable">err</span> = <span class="variable">e</span>[<span class="variable">i</span>++];){
				<span class="variable">assert</span>.<span class="variable">throws</span>(<span class="variable">fn</span>(<span class="variable">err</span>), <span class="class">Error</span>, <span class="string">'did not throw Namespace exists error.'</span>);
			}
		}
	}
}
<span class="variable">addTest</span>(<span class="variable">testNamespaceDuplicationError</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testNamespaceType
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testNamespaceType</span>(<span class="variable">ns</span>){	
	<span class="variable">assert</span>.<span class="variable">strictEqual</span>(<span class="variable">ns</span>.<span class="variable">namespace</span>.<span class="variable">__type</span>, <span class="string">'Namespace'</span>, <span class="string">'Incorrect __type property set.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testNamespaceType</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testNamespaceDeep
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testNamespaceDeep</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">deep</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'namespace'</span>), <span class="string">'The deep.namespace was not created!'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testNamespaceDeep</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testNamespaceDeepDuplicationError
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testNamespaceDeepDuplicationError</span>(<span class="variable">ns</span>){
	<span class="keyword">try</span>{
		<span class="variable">ns</span>.<span class="variable">ns</span>(<span class="string">'deep.namespace.test'</span>);
	}<span class="keyword">catch</span>(<span class="variable">e</span>){
		<span class="keyword">if</span>(<span class="variable">e</span> <span class="variable">instanceof</span> <span class="class">Array</span>){
			<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>,
				<span class="variable">err</span>,
				<span class="variable">fn</span> = <span class="keyword">function</span>(<span class="variable">err_i</span>){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="keyword">throw</span> <span class="variable">err_i</span>;};};
			<span class="keyword">for</span>(;<span class="variable">err</span> = <span class="variable">e</span>[<span class="variable">i</span>++];){
				<span class="variable">assert</span>.<span class="variable">throws</span>(<span class="variable">fn</span>(<span class="variable">err</span>), <span class="class">Error</span>, <span class="string">'did not throw Namespace exists error.'</span>);
			}
		}
	}
}
<span class="variable">addTest</span>(<span class="variable">testNamespaceDeepDuplicationError</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testModuleLoaded
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testModuleLoaded</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'singleton'</span>), <span class="string">'The singleton module was not loaded!'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">__type</span> === <span class="string">'Singleton'</span>, <span class="string">'The singleton module does not have the appropriate __type property'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testModuleLoaded</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testMethodLoaded
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testMethodLoaded</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'method'</span>), <span class="string">'The f method was not loaded!'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">method</span>.<span class="variable">__type</span> === <span class="string">'Method'</span>, <span class="string">'The method has the wrong __type property.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testMethodLoaded</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testNumberPropertyLoaded
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testNumberPropertyLoaded</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'number'</span>), <span class="string">'The number property was not loaded!'</span>);
	<span class="variable">assert</span>.<span class="variable">strictEqual</span>(<span class="keyword">typeof</span> <span class="variable">ns</span>.<span class="variable">number</span>(), <span class="string">'number'</span>, <span class="string">'Value of ns.number was not numeric'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testNumberPropertyLoaded</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testStringPropertyLoaded
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testStringPropertyLoaded</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'string'</span>), <span class="string">'The string property was not loaded!'</span>);
	<span class="variable">assert</span>.<span class="variable">strictEqual</span>(<span class="keyword">typeof</span> <span class="variable">ns</span>.<span class="variable">string</span>(), <span class="string">'string'</span>, <span class="string">'Value of ns.string was not a string'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testStringPropertyLoaded</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testBooleanPropertyLoaded
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testBooleanPropertyLoaded</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">boolean</span>() === <span class="variable">true</span>, <span class="string">'Value of boolean property was not true'</span>);
	<span class="variable">ns</span>.<span class="variable">boolean</span>(<span class="variable">false</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">boolean</span>() === <span class="variable">false</span>, <span class="string">'Value of boolean did not change to false'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testBooleanPropertyLoaded</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testChangeSetter 
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testChangeSetter</span>(<span class="variable">ns</span>){
	<span class="variable">ns</span>.<span class="variable">number</span>.<span class="variable">changeSetter</span>(<span class="keyword">function</span>(<span class="variable">x</span>){
		<span class="keyword">return</span> <span class="variable">parseFloat</span>(<span class="variable">x</span>).<span class="variable">toFixed</span>(<span class="number integer">2</span>);
	});
	<span class="variable">ns</span>.<span class="variable">number</span>(<span class="number integer">10</span>);
	<span class="variable">assert</span>.<span class="variable">strictEqual</span>(<span class="variable">ns</span>.<span class="variable">number</span>(), <span class="string">'10.00'</span>, <span class="string">'Setter did not appropriately affect the internal value.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testChangeSetter</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testChangeGetter
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testChangeGetter</span>(<span class="variable">ns</span>){
	<span class="variable">ns</span>.<span class="variable">string</span>.<span class="variable">changeGetter</span>(<span class="keyword">function</span>(<span class="variable">x</span>){
		<span class="keyword">return</span> (<span class="variable">x</span>.<span class="variable">toLowerCase</span>().<span class="variable">replace</span>(<span class="regexp">/\s/g</span>, <span class="string">''</span>) === <span class="variable">x</span>.<span class="variable">toLowerCase</span>().<span class="variable">replace</span>(<span class="regexp">/\s/g</span>, <span class="string">''</span>).<span class="variable">split</span>(<span class="string">''</span>).<span class="variable">reverse</span>().<span class="variable">join</span>(<span class="string">''</span>))?<span class="variable">x</span> + <span class="string">' is a palindrome'</span>: <span class="variable">x</span> + <span class="string">' is not a palindrome'</span>;
	});
	<span class="variable">ns</span>.<span class="variable">string</span>(<span class="string">'Was it a rat I saw'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">string</span>().<span class="variable">indexOf</span>(<span class="string">'palindrome'</span>) &gt; -<span class="number integer">1</span>, <span class="string">'The getter did not change the result.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testChangeGetter</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testConstructor
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testConstructor</span>(<span class="variable">ns</span>){
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="keyword">typeof</span> <span class="variable">ns</span>.<span class="class">Constructor</span> === <span class="string">'function'</span>, <span class="string">'Constructor module is not a funtion.'</span>);
	<span class="keyword">var</span> <span class="variable">testObj</span> = <span class="keyword">new</span> <span class="variable">ns</span>.<span class="class">Constructor</span>();
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">testObj</span>.<span class="variable">y</span>, <span class="string">'The object create from the Constructor module did not contain the right properties.'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">testObj</span> <span class="variable">instanceof</span> <span class="variable">ns</span>.<span class="class">Constructor</span>, <span class="string">'Object create from the Constructor is not an instance of Constructor'</span>);
	<span class="variable">assert</span>.<span class="variable">strictEqual</span>(<span class="variable">ns</span>.<span class="class">Constructor</span>.<span class="variable">__type</span>, <span class="string">'Constructor'</span>, <span class="string">'__type property was not set properly.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testConstructor</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testRequire
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testRequire</span>(<span class="variable">ns</span>){
	<span class="keyword">var</span> <span class="variable">add</span> = <span class="variable">ns</span>.<span class="variable">require</span>(<span class="string">'math.add'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="keyword">typeof</span> <span class="variable">add</span> === <span class="string">'function'</span>, <span class="string">'Returned something that was not the function I require.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testRequire</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testRequireRetain
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testRequireRetain</span>(<span class="variable">ns</span>){
	<span class="keyword">var</span> <span class="variable">mul</span> = <span class="variable">ns</span>.<span class="variable">require</span>(<span class="string">'math.mul'</span>, <span class="variable">true</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="keyword">typeof</span> <span class="variable">mul</span> === <span class="string">'function'</span>, <span class="string">'Returned something that was not the function I require.'</span>);
	<span class="variable">assert</span>.<span class="variable">strictEqual</span>(<span class="variable">mul</span>(<span class="number integer">9</span>, <span class="number integer">9</span>), <span class="number integer">81</span>, <span class="string">'Something went wrong with the multiplication function. Got result :: '</span> + <span class="variable">mul</span>(<span class="number integer">9</span>, <span class="number integer">9</span>));
}
<span class="variable">addTest</span>(<span class="variable">testRequireRetain</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function testExtendModule
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">testExtendModule</span>(<span class="variable">ns</span>){
	<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">load</span>(<span class="string">'n'</span>, <span class="number integer">10</span>);
	<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">load</span>(<span class="string">'s'</span>, <span class="string">'Hello'</span>);
	<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">ns</span>(<span class="string">'test'</span>);
	<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">load</span>(<span class="string">'fn'</span>, <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="this">this</span>.<span class="variable">__name</span>;});
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">n</span>.<span class="variable">__type</span> === <span class="string">'Property'</span>, <span class="string">'Invalid type on module property.'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">s</span>() === <span class="string">'Hello'</span>, <span class="string">'Invalid value on module property'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">test</span>.<span class="variable">__type</span> === <span class="string">'Namespace'</span>, <span class="string">'Namespace test not loaded onto module.'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">fn</span>.<span class="variable">__type</span> === <span class="string">'Method'</span>, <span class="string">'Method not loaded onto module.'</span>);
	<span class="variable">assert</span>.<span class="variable">ok</span>(<span class="variable">ns</span>.<span class="variable">singleton</span>.<span class="variable">fn</span>() === <span class="string">'singleton'</span>, <span class="string">'Context was not retained in loaded method.'</span>);
}
<span class="variable">addTest</span>(<span class="variable">testExtendModule</span>);</code></pre>
                </td>
            </tr>
            <tr class="code">
                <td>
<p>## Function tearDown
 </p>
                </td>
                <td>
<pre><code><span class="keyword">function</span> <span class="variable">tearDown</span>(<span class="variable">nsjs</span>){
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">namespace</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">deep</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">singleton</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">method</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="class">Constructor</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">number</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">string</span>;
	<span class="keyword">delete</span> <span class="variable">nsjs</span>.<span class="variable">boolean</span>;
}
<span class="variable">exports</span>.<span class="variable">runTests</span> = <span class="variable">runTests</span>;
})((<span class="keyword">typeof</span> <span class="variable">exports</span> !== <span class="variable">undefined</span>)?<span class="variable">exports</span>:<span class="variable">window</span>);</code></pre>
                </td>
            </tr>
        </tbody></table>
    </body>
</html>
