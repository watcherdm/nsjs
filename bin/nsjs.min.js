(function(h){function j(b,a){if(!/^[a-z0-9_.]+/.test(b))throw Error("Invalid name provided."+b);this.__name=b;this.__parent=a||h;this.__type="Namespace";return this}function i(b,a,d){if(!/^[A-Za-z0-9_.]+/.test(b))throw Error("Invalid name provided."+b);this.__name=b;this.__type=d;this.__parent=a||h;this.ns=k;this.load=l;this.lock=m;return this}function k(b){var a,d=this,f=0,c=[];for(b=b.indexOf(".")>-1?b.split("."):[b];a=b[f++];){if(d[a]!==undefined)c.push(Error(a+" namespace already defined."));
else d[a]=new j(a,d);d=d[a]}if(c.length>0)throw c;return d}function l(b,a,d){function f(){var e=Array.prototype.slice;d||arguments.length===1&&n(arguments[0]);e=typeof a==="object"?a instanceof Array?e.call(a,0):Object.clone(a):a;if(typeof g==="function")return g(e);return e}var c=o(a),g,n;if(this[b]!==undefined)throw Error("Module already defined.");n=function(e){a=e};f.changeGetter=function(e){if(typeof e==="function")g=e};f.changeSetter=function(e){if(typeof e==="function")n=function(p){a=e(p)}};
if(c==="Property"){i.prototype=Object.create(f);this[b]=i.call(f,b,this,c,f)}else{i.prototype=Object.create(a);this[b]=typeof a!=="function"?new i(b,this,c,a):i.call(a,b,this,c,a)}return this[b]}function m(){this.ns=function(){};this.load=function(){};this.lock=function(){}}function o(b){var a="Unknown";switch(typeof b){case "string":case "number":case "boolean":a="Property";break;case "object":if(b instanceof Array){a="Collection";break}a="Singleton";break;case "function":if(b.name&&b.name[0]===
b.name[0].toUpperCase()){a="Constructor";break}a="Method"}return a}function q(b,a){return function(){return b.apply(a,arguments)}}j.prototype={ns:k,load:l,lock:m};j.prototype.constructor=j;h.Namespace=j;h.Module=i;h.ns=k;h.load=l;h.lock=m;h.require=function(b,a){for(var d=b.indexOf(".")>-1?b.split("."):[b],f=0,c,g=h;c=d[f++];){if(f===d.length){if(g[c].__type==="Method"&&a)return q(g[c],g);return g[c]}g=g[c]}}})(typeof exports!==undefined?this:exports);
